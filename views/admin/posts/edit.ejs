<div class="admin-form">
    <div class="form-header">
        <h2 class="form-title">Edit Post</h2>
        <p class="form-description">Update your gaming article</p>
    </div>
    
    <form action="/admin/posts/<%= post._id %>?_method=PUT" method="POST" enctype="multipart/form-data" class="post-form">
        <% if (typeof errors !== 'undefined' && errors.length > 0) { %>
        <div class="error-messages">
            <% errors.forEach(error => { %>
            <div class="error-message">
                <i class="fas fa-exclamation-circle"></i>
                <%= error.msg %>
            </div>
            <% }); %>
        </div>
        <% } %>
        
        <div class="form-group">
            <label for="title" class="form-label">Title *</label>
            <input type="text" id="title" name="title" class="form-input" 
                   value="<%= post.title %>" 
                   placeholder="Enter article title" required>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label for="category" class="form-label">Category *</label>
                <select id="category" name="category" class="form-select" required>
                    <option value="">Select category</option>
                    <option value="News" <%= post.category === 'News' ? 'selected' : '' %>>News</option>
                    <option value="Reviews" <%= post.category === 'Reviews' ? 'selected' : '' %>>Reviews</option>
                    <option value="Opinion" <%= post.category === 'Opinion' ? 'selected' : '' %>>Opinion</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="author" class="form-label">Author</label>
                <input type="text" id="author" name="author" class="form-input" 
                       value="<%= post.author %>" 
                       placeholder="Author name">
            </div>
        </div>
        
        <div class="form-group">
            <label for="image" class="form-label">Featured Image URL</label>
            <input type="url" id="image" name="image" class="form-input" 
                   value="<%= post.imageUrl || '' %>" 
                   placeholder="https://example.com/image.jpg">
        </div>

        <div class="form-group">
            <label for="imageFile" class="form-label">Or upload a new image</label>
            <input type="file" id="imageFile" name="imageFile" class="form-input" accept="image/*">
            <small class="muted">Uploading a file will replace the current featured image.</small>
            <% if (post.imageSrc) { %>
            <div class="current-image-preview" style="margin-top:8px;">
                <img src="<%= post.imageSrc %>" alt="Current image" style="max-width:200px; border-radius:6px; border:1px solid #e9ecef;">
            </div>
            <% } %>
        </div>
        
        <div class="form-group">
            <label for="content" class="form-label">Content *</label>
            <div class="editor-container">
                <div class="editor-panel">
                    <textarea id="content" name="content" class="form-textarea" 
                              placeholder="Write your article content here..." required><%= post.content %></textarea>
                </div>
                <div class="preview-panel">
                    <div class="preview-header">
                        <h4>Live Preview</h4>
                        <button type="button" id="toggle-preview" class="btn btn-sm btn-outline">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    <div class="preview-content" id="live-preview">
                        <div class="preview-placeholder">
                            <i class="fas fa-eye"></i>
                            <p>Start typing to see live preview</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="form-group">
            <div class="checkbox-group">
                <label class="checkbox-label">
                    <input type="checkbox" name="featured" class="form-checkbox" 
                           <%= post.featured ? 'checked' : '' %>>
                    <span class="checkbox-text">Feature this article (Carousel)</span>
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" name="semiFeatured" class="form-checkbox" 
                           <%= post.semiFeatured ? 'checked' : '' %>>
                    <span class="checkbox-text">Semi-feature this article (Grid)</span>
                </label>
            </div>
        </div>
        
        <div class="form-actions">
            <a href="/admin/posts" class="btn btn-outline">Cancel</a>
            <button type="submit" class="btn btn-primary">
                <i class="fas fa-save"></i>
                Update Article
            </button>
        </div>
    </form>
</div>
